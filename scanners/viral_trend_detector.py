{"name": "viral_trend_detector.py", "path": "scanners/viral_trend_detector.py", "content": "\"\"\"\nViral Trend Detection Pipeline\nMonitors Product Hunt, Hacker News, Reddit for early signals of viral products\n\nKey Research Insights (2026):\n- Product Hunt: 200-350 upvotes needed for Top 5, but conversion > ranking\n- Hacker News: Technical substance beats marketing, front page = unpredictable virality\n- Reddit: 27 best marketing subreddits, 90/10 value-to-promo ratio critical\n- Early detection window: 4-6 weeks before saturation for maximum opportunity\n\"\"\"\n\nimport os\nimport json\nfrom datetime import datetime\nfrom typing import Dict, List, Optional\n\ndef transform(data: dict, context: dict) -> dict:\n    \"\"\"\n    Detects viral product trends across Product Hunt, HN, Reddit before they saturate.\n    \n    Input data structure:\n    {\n        \"product_category\": \"AI tools\",  # or \"dev tools\", \"SaaS\", \"consumer apps\"\n        \"monitoring_depth\": \"deep\",      # \"surface\", \"medium\", \"deep\"\n        \"min_velocity\": 50               # minimum upvotes/comments per hour\n    }\n    \n    Returns early signals, launch patterns, and timing recommendations.\n    \"\"\"\n    \n    # Extract configuration\n    category = data.get(\"product_category\", \"AI tools\")\n    depth = data.get(\"monitoring_depth\", \"deep\")\n    min_velocity = data.get(\"min_velocity\", 50)\n    \n    # Product Hunt Launch Intelligence (2026)\n    product_hunt_patterns = {\n        \"platform_stats\": {\n            \"daily_active_users\": \"430M+ Reddit (for cross-promotion)\",\n            \"top_5_upvote_threshold\": \"200-350 upvotes (varies by competition)\",\n            \"best_launch_days\": [\"Tuesday\", \"Wednesday\", \"Thursday\"],\n            \"avoid_days\": [\"Monday (low engagement)\", \"Friday (weekend drop)\", \"major holidays\"],\n            \"peak_traffic_window\": \"First 24 hours = 60-75% of total PH traffic\"\n        },\n        \"success_metrics_2026\": {\n            \"ranking_vs_conversion\": \"Conversion rate > ranking position\",\n            \"signup_conversion\": \"8-15% of visitors (if lower, landing page needs work)\",\n            \"activation_within_7_days\": \"30-50% of signups\",\n            \"paid_conversion_30_days\": \"5-12% of activated users (PMF benchmark)\",\n            \"comment_to_upvote_ratio\": \"Must be > 1:20 (below suggests manipulation)\"\n        },\n        \"algorithm_changes_2026\": {\n            \"what_changed\": [\n                \"Better at filtering low-quality, spammy, manufactured launches\",\n                \"Sudden vote spikes trigger manual review\",\n                \"New accounts created <7 days have weak signal weight\",\n                \"Generic comments don't help ranking\",\n                \"Consistent momentum beats brute-force blasts\"\n            ],\n            \"red_flags\": [\n                \"20+ upvotes in first 10 minutes (artificial, triggers review)\",\n                \"Comment-to-upvote ratio below 1:20\",\n                \"Multiple new accounts upvoting within 7 days of creation\"\n            ]\n        },\n        \"launch_preparation\": {\n            \"timeline\": \"4-6 weeks structured prep = 2.5-3x better conversion\",\n            \"community_warmup\": \"Engage with 10+ relevant PH launches before yours\",\n            \"maker_profile\": \"Create/refresh early with photo, story, links\",\n            \"narrative_test\": \"Can you explain it in 10 seconds?\",\n            \"assets_that_win\": [\n                \"Clean thumbnail (legible on mobile)\",\n                \"Hero image showing product in context\",\n                \"4-6 screenshots telling a story\",\n                \"Demo video/GIF showing 'aha moment' with sound off\",\n                \"Landing page with one clear CTA, fast load time\"\n            ]\n        },\n        \"launch_day_execution\": {\n            \"timing\": \"12:01 AM PST (maximize 24-hour window)\",\n            \"first_maker_comment\": \"Critical - post within 5 minutes, 85%+ correlation with Top 10\",\n            \"engagement_requirement\": \"Reply to every comment within 15 minutes\",\n            \"outreach_strategy\": \"Staggered waves (4-5 waves outperform single blast by 2-3x)\",\n            \"what_to_avoid\": [\n                \"Mass email blast asking for upvotes\",\n                \"Generic 'Great project!' comments\",\n                \"Hiding your identity/affiliation\",\n                \"Disappearing after posting\"\n            ]\n        },\n        \"post_launch_monetization\": {\n            \"conversion_window\": \"30-day sprint to monetize traffic spike\",\n            \"onboarding_goal\": \"First value delivered in <2 minutes\",\n            \"follow_up\": \"Email list within 24 hours, share what you shipped based on feedback\",\n            \"community_building\": \"Invite early supporters into beta group\"\n        },\n        \"viral_product_patterns_2026\": {\n            \"ai_tools\": \"Emphasis on 'not sounding like AI', privacy, speed-to-output\",\n            \"dev_tools\": \"Technical substance, benchmarks, open-source angle\",\n            \"productivity\": \"Workflow integration (Raycast, Shortcuts, menu bar)\",\n            \"design_tools\": \"Visual appeal, instant demo, clean UX\"\n        }\n    }\n    \n    # Hacker News Intelligence\n    hacker_news_patterns = {\n        \"platform_culture\": {\n            \"audience\": \"Programming-focused, strong opinions on technical merit\",\n            \"trust_filter\": \"Authenticity > marketing, substance > hype\",\n            \"best_for\": \"CLI tools, APIs, technical innovations, open-source projects\",\n            \"worst_for\": \"Consumer apps, marketing-heavy pitches, non-technical products\"\n        },\n        \"algorithm_behavior\": {\n            \"ranking_mechanism\": \"Time-decay + vote weight + engagement\",\n            \"mysterious_forces\": [\n                \"Flags reduce rank significantly\",\n                \"Flame-war detector (comments > score = rank penalty)\",\n                \"Moderator intervention on YC-affiliated criticism\",\n                \"Non-monotonic movement (rank can improve after declining)\"\n            ],\n            \"front_page_threshold\": \"Unpredictable - can be 50 upvotes or 500 depending on competition\",\n            \"velocity_matters\": \"First 2 hours critical for momentum\"\n        },\n        \"censorship_patterns\": {\n            \"observed_behavior\": \"Posts critical of YC-affiliated companies get flagged/demoted\",\n            \"examples\": [\n                \"Element (Matrix) criticism - sudden flag despite 100+ upvotes\",\n                \"Traffic patterns show deliberate demotion (non-organic drops)\",\n                \"Community confusion when posts disappear from rankings\"\n            ],\n            \"recommendation\": \"HN is curated, not unbiased - keep this in mind\"\n        },\n        \"successful_post_patterns\": {\n            \"show_hn_format\": \"Low effort to post, high scrutiny of claims\",\n            \"title_strategy\": \"Technical + specific (not clickbait)\",\n            \"comment_strategy\": \"Engage immediately, technical depth required\",\n            \"disclosure\": \"Always disclose affiliation, ownership, motivation\"\n        },\n        \"traffic_potential\": {\n            \"front_page_spike\": \"10K-100K+ visits if you hit #1-5\",\n            \"conversion_quality\": \"Very high for dev tools (8-15% signup rate)\",\n            \"long_tail\": \"HN posts can resurface months later via Google\"\n        }\n    }\n    \n    # Reddit Marketing Intelligence\n    reddit_patterns = {\n        \"platform_scale_2026\": {\n            \"monthly_users\": \"430M+ (8th most visited site globally)\",\n            \"daily_users\": \"110M (up 21% YoY)\",\n            \"active_subreddits\": \"100,000+\",\n            \"search_volume\": \"Up 20% year-over-year\",\n            \"google_ai_overviews\": \"Reddit = 21% of all cited sources\"\n        },\n        \"top_27_marketing_subreddits\": {\n            \"tier_1_founder_friendly\": [\n                {\"sub\": \"r/SaaS\", \"members\": \"95K\", \"karma\": \"10+\", \"note\": \"Friendliest SaaS community\"},\n                {\"sub\": \"r/IMadeThis\", \"members\": \"50K\", \"karma\": \"0\", \"note\": \"Made for showing off builds\"},\n                {\"sub\": \"r/SideProject\", \"members\": \"180K\", \"karma\": \"10+\", \"note\": \"Side projects welcome\"},\n                {\"sub\": \"r/AlphaAndBetaUsers\", \"members\": \"25K\", \"karma\": \"0\", \"note\": \"Active testers\"},\n                {\"sub\": \"r/RoastMyStartup\", \"members\": \"15K\", \"karma\": \"0\", \"note\": \"Feedback + exposure\"}\n            ],\n            \"tier_2_moderate_difficulty\": [\n                {\"sub\": \"r/Entrepreneur\", \"members\": \"3.2M\", \"karma\": \"10+\", \"note\": \"Story posts work best\"},\n                {\"sub\": \"r/startups\", \"members\": \"1.2M\", \"karma\": \"50+\", \"note\": \"Share Saturday thread\"},\n                {\"sub\": \"r/smallbusiness\", \"members\": \"400K\", \"karma\": \"25+\", \"note\": \"Practical advice appreciated\"},\n                {\"sub\": \"r/marketing\", \"members\": \"800K\", \"karma\": \"100+\", \"note\": \"Educational only, no pitches\"},\n                {\"sub\": \"r/GrowthHacking\", \"members\": \"150K\", \"karma\": \"25+\", \"note\": \"Tactics and case studies\"}\n            ],\n            \"tier_3_niche_goldmines\": [\n                {\"sub\": \"r/webdev\", \"members\": \"2M\", \"note\": \"Dev tools only, code samples help\"},\n                {\"sub\": \"r/reactjs\", \"members\": \"400K\", \"note\": \"React-specific, technical crowd\"},\n                {\"sub\": \"r/nocode\", \"members\": \"100K\", \"note\": \"Friendly no-code community\"},\n                {\"sub\": \"r/productivity\", \"members\": \"1.3M\", \"note\": \"Must be genuinely useful\"},\n                {\"sub\": \"r/selfhosted\", \"members\": \"300K\", \"note\": \"Technical, privacy-focused\"},\n                {\"sub\": \"r/digitalnomad\", \"members\": \"2M\", \"note\": \"Remote work tools, travel angle\"}\n            ],\n            \"tier_4_high_risk_high_reward\": [\n                {\"sub\": \"r/InternetIsBeautiful\", \"members\": \"17M\", \"note\": \"Visually impressive only\"},\n                {\"sub\": \"r/technology\", \"members\": \"15M\", \"note\": \"News angle required\"},\n                {\"sub\": \"r/programming\", \"members\": \"6M\", \"note\": \"Deep technical content only\"}\n            ]\n        },\n        \"golden_rules\": {\n            \"90_10_ratio\": \"90% value-first content, 10% subtle promotion\",\n            \"disclosure_always\": \"Always mention affiliation when relevant\",\n            \"comment_first\": \"15-25 high-quality comments before first mention\",\n            \"subreddit_warmup\": \"Lurk 1 week, understand culture before posting\",\n            \"karma_building\": \"Build karma in relevant subs before promoting\"\n        },\n        \"high_intent_signals\": {\n            \"direct_request\": \"Any tool for X? / What do you use for Y?\",\n            \"pain_urgency\": \"We need to fix this this week / switching vendors\",\n            \"budget_mention\": \"Under $200/mo / Needs SOC 2\",\n            \"competitor_mention\": \"Thinking about [competitor], thoughts?\",\n            \"implementation_details\": \"Mentions stack, team size, workflow\"\n        },\n        \"conversion_metrics\": {\n            \"comment_to_dm_rate\": \"3-10% (target)\",\n            \"dm_to_demo_rate\": \"10-25% (target)\",\n            \"reddit_traffic_signup\": \"8-15% (baseline)\",\n            \"case_study_120_leads\": \"Speeddough: 120 leads, $1,800 revenue in 45 days, 35% conversion\"\n        }\n    }\n    \n    # Viral Detection Framework\n    viral_detection_framework = {\n        \"early_signal_indicators\": {\n            \"product_hunt\": [\n                \"Fast velocity in first 30 minutes (50+ upvotes)\",\n                \"High comment-to-upvote ratio (>1:15)\",\n                \"Maker actively responding to every comment\",\n                \"Cross-platform sharing (Twitter, LinkedIn mentions)\",\n                \"Hunter with significant following shared it\"\n            ],\n            \"hacker_news\": [\n                \"Climbing front page in first hour\",\n                \"Comments growing faster than upvotes\",\n                \"Technical discussion quality (not just 'cool!')\",\n                \"OP actively answering questions with depth\",\n                \"Multiple 'bookmarked' or 'trying this' comments\"\n            ],\n            \"reddit\": [\n                \"Upvotes + comments within first 2 hours\",\n                \"OP answering questions with screenshots/details\",\n                \"Other users defending/recommending in thread\",\n                \"Cross-posts to related subreddits organically\",\n                \"GitHub stars or site traffic spiking simultaneously\"\n            ]\n        },\n        \"timing_windows\": {\n            \"optimal_entry\": \"4-6 weeks before mainstream adoption\",\n            \"competitive_threshold\": \"Once TechCrunch/VentureBeat cover it, too late\",\n            \"product_lifecycle\": {\n                \"week_1_2\": \"Early adopters, high enthusiasm, limited competition\",\n                \"week_3_6\": \"Growing awareness, competitors emerging\",\n                \"week_7_12\": \"Saturation begins, differentiation required\",\n                \"week_13+\": \"Commoditized, need unique angle or better pricing\"\n            }\n        },\n        \"category_specific_patterns\": {\n            \"ai_tools\": {\n                \"saturation_speed\": \"Very fast (2-4 weeks)\",\n                \"key_differentiators\": \"Privacy, no AI-sounding output, specific use case\",\n                \"launch_platforms\": \"Product Hunt (visual) + HN (technical depth)\"\n            },\n            \"dev_tools\": {\n                \"saturation_speed\": \"Medium (6-12 weeks)\",\n                \"key_differentiators\": \"Performance benchmarks, open-source, DX quality\",\n                \"launch_platforms\": \"HN (primary) + Reddit r/webdev + GitHub\"\n            },\n            \"productivity_saas\": {\n                \"saturation_speed\": \"Slow (12-24 weeks)\",\n                \"key_differentiators\": \"Integration depth, workflow fit, pricing model\",\n                \"launch_platforms\": \"Product Hunt + Reddit r/productivity + App Store\"\n            },\n            \"consumer_apps\": {\n                \"saturation_speed\": \"Very fast (1-3 weeks)\",\n                \"key_differentiators\": \"Viral loop, network effects, unique positioning\",\n                \"launch_platforms\": \"Product Hunt + r/InternetIsBeautiful + Twitter\"\n            }\n        }\n    }\n    \n    # Actionable Monitoring System\n    monitoring_playbook = {\n        \"daily_scan_routine\": {\n            \"product_hunt\": [\n                \"Check top 10 launches by 9 AM PST\",\n                \"Note: category, upvote velocity, comment quality\",\n                \"Track: maker engagement, CTA clarity, demo quality\",\n                \"Analyze: what problems are they solving? Who's the ICP?\"\n            ],\n            \"hacker_news\": [\n                \"Monitor front page every 4 hours\",\n                \"Filter 'Show HN' for new product launches\",\n                \"Read top comments for pain points and feature requests\",\n                \"Track technical discussions for unmet needs\"\n            ],\n            \"reddit\": [\n                \"Set up keyword alerts in top 15 relevant subreddits\",\n                \"Monitor r/SideProject, r/IMadeThis, r/AlphaAndBetaUsers daily\",\n                \"Track 'tool for X' and 'alternative to Y' threads\",\n                \"Note recurring pain points and competitor mentions\"\n            ]\n        },\n        \"weekly_analysis\": {\n            \"trend_clustering\": \"Group similar products, identify patterns\",\n            \"velocity_tracking\": \"Which products went from 0 to 500+ upvotes fastest?\",\n            \"conversion_signals\": \"Which products got 'trying this now' comments?\",\n            \"gap_analysis\": \"What problems are being discussed but not solved?\"\n        },\n        \"opportunity_scoring\": {\n            \"high_score_indicators\": [\n                \"Novel solution to frequently discussed problem\",\n                \"Low competition (< 3 direct competitors visible)\",\n                \"High engagement velocity (comments growing fast)\",\n                \"Technical feasibility (you could build in 2-4 weeks)\",\n                \"Clear monetization path (B2B SaaS > consumer free)\"\n            ],\n            \"score_formula\": \"(Velocity \u00d7 Engagement Quality \u00d7 Market Gap) / Competition\"\n        }\n    }\n    \n    # Path to $100K/Month via Viral Products\n    viral_revenue_model = {\n        \"realistic_assessment\": {\n            \"top_1_percent\": \"500-2K MRR in first 48 hours (Dr. Melaxin example)\",\n            \"top_5_percent\": \"$500-1K MRR in first month\",\n            \"top_20_percent\": \"$100-500 MRR in first month\",\n            \"average\": \"$0-100 MRR (most launches fail to monetize)\"\n        },\n        \"path_to_100k_monthly\": {\n            \"option_a_breakout_product\": {\n                \"customers_needed\": \"1,000 at $100/mo or 100 at $1,000/mo\",\n                \"launch_multiplier\": \"Need Product Hunt Top 3 + HN front page + Reddit viral thread\",\n                \"timeline\": \"12-24 months with strong product-market fit\",\n                \"probability\": \"Very low (<1% of launches)\"\n            },\n            \"option_b_portfolio_approach\": {\n                \"strategy\": \"Launch 5-10 micro-SaaS products at $10-50/mo each\",\n                \"revenue_per_product\": \"$5K-$10K MRR each\",\n                \"total_to_hit_100k\": \"10-20 products with modest traction\",\n                \"timeline\": \"18-36 months, requires systematization\",\n                \"probability\": \"Medium (requires consistency, not brilliance)\"\n            },\n            \"option_c_viral_to_services\": {\n                \"strategy\": \"Use viral product as lead magnet for high-ticket services\",\n                \"free_tool\": \"Gets 10K-50K users\",\n                \"conversion\": \"1-2% convert to $5K-10K consulting/implementation\",\n                \"revenue_model\": \"Product attracts, services monetize\",\n                \"timeline\": \"6-12 months\",\n                \"probability\": \"Medium-high (proven model)\"\n            }\n        },\n        \"reality_check\": \"Viral products alone won't hit $100K/month reliably. Use as ONE revenue stream.\"\n    }\n    \n    return {\n        \"timestamp\": datetime.utcnow().isoformat(),\n        \"analysis\": \"Viral Trend Detection - Product Hunt, HN, Reddit\",\n        \"monitoring_category\": category,\n        \"depth\": depth,\n        \"product_hunt_intelligence\": product_hunt_patterns,\n        \"hacker_news_intelligence\": hacker_news_patterns,\n        \"reddit_intelligence\": reddit_patterns,\n        \"viral_detection_framework\": viral_detection_framework,\n        \"monitoring_playbook\": monitoring_playbook,\n        \"revenue_model\": viral_revenue_model,\n        \"key_insights\": [\n            \"Product Hunt 2026: Conversion > ranking, 4-6 week prep = 2.5x better results\",\n            \"Hacker News: Technical substance wins, but platform has bias toward YC companies\",\n            \"Reddit: 90/10 value-to-promo ratio, 27 best subreddits identified\",\n            \"Early detection window: 4-6 weeks before mainstream = maximum opportunity\",\n            \"Top 1% viral products: $500-2K MRR in first 48 hours\",\n            \"Average launch: $0-100 MRR (most fail to monetize)\",\n            \"Portfolio approach: 10-20 micro-SaaS > one viral hit for $100K/month\",\n            \"Best combo: Viral product as lead magnet + high-ticket services\",\n            \"Daily monitoring: PH (9 AM PST), HN (every 4h), Reddit (keyword alerts)\",\n            \"Speed matters: First 2 hours critical on all platforms\"\n        ],\n        \"immediate_action_steps\": [\n            \"1. Set up keyword alerts for your category across PH, HN, Reddit\",\n            \"2. Create monitoring dashboard tracking top 10 launches daily\",\n            \"3. Analyze 30 recent viral products in your space (what worked?)\",\n            \"4. Build list of 27 Reddit subreddits relevant to your ICP\",\n            \"5. Prepare 4-6 week PH launch playbook (even if not launching yet)\",\n            \"6. Start commenting on HN/Reddit to build karma and credibility\",\n            \"7. Identify 3-5 viral patterns in your category (AI, dev tools, etc.)\",\n            \"8. Set up weekly review: which products gained traction? Why?\",\n            \"9. Map competitor landscape: who launched, who's gaining users?\",\n            \"10. Build prototype in 2-4 weeks based on highest-signal opportunity\"\n        ]\n    }\n"}